chrome.runtime.onInstalled.addListener(()=>{console.log("Context Bridge installed"),chrome.contextMenus.create({id:"summarize-selection",title:"Context Bridge â†’ Summarize Selection",contexts:["selection"]})});chrome.contextMenus.onClicked.addListener((t,n)=>{t.menuItemId==="summarize-selection"&&(n!=null&&n.id)&&chrome.tabs.sendMessage(n.id,{action:"summarize-selection",text:t.selectionText})});chrome.runtime.onMessage.addListener((t,n,r)=>{if(console.log("Background received message:",t),t.action==="get-selection")return chrome.tabs.query({active:!0,currentWindow:!0},i=>{var o;(o=i[0])!=null&&o.id&&chrome.scripting.executeScript({target:{tabId:i[0].id},func:()=>{var e;return((e=window.getSelection())==null?void 0:e.toString())||""}},e=>{var c;const d=((c=e==null?void 0:e[0])==null?void 0:c.result)||"";r({selection:d})})}),!0});
